<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="main.css" />
    <title>Document</title>
  </head>
  <body>
    <script>
      "use strict";
      let employees = [
        { name: "employee1", age: 30, salary: 400 },
        { name: "employee2", age: 31, salary: 500 },
        { name: "employee3", age: 32, salary: 600 },
      ];

      let table = document.createElement("table");
      table.id = "table";
      document.body.appendChild(table);

      for (let employee of employees) {
        addTd(employee.name, employee.age, employee.salary);
      }

      let inputName = document.createElement("input");
      inputName.placeholder = 'name';
      document.body.appendChild(inputName);

      let inputAge = document.createElement("input");
      inputAge.placeholder = 'age';
      document.body.appendChild(inputAge);

      let inputSalary = document.createElement("input");
      inputSalary.placeholder = 'salary';
      document.body.appendChild(inputSalary);

      let button = document.createElement("button");
      button.innerHTML = "click for add";
      document.body.appendChild(button);

      button.addEventListener("click", function () {
        addTd(inputName.value, inputAge.value, inputSalary.value);
      });

      function addTd(name, age, salary) {
        let tr = document.createElement("tr");

        let nameTd = document.createElement("td");
        nameTd.innerHTML = name;
        tr.appendChild(nameTd);

        let ageTd = document.createElement("td");
        ageTd.innerHTML = age;
        tr.appendChild(ageTd);

        let salaryTd = document.createElement("td");
        salaryTd.innerHTML = salary;
        tr.appendChild(salaryTd);

        let removTr = document.createElement("td");
        removTr.classList.add("remov");
        let remov = document.createElement("a");
        remov.href = "#";
        remov.innerHTML = "remove";
        removTr.appendChild(remov);

        remov.addEventListener("click", () => tr.parentElement.removeChild(tr));

        tr.appendChild(removTr);

        table.appendChild(tr);

        let tds = document.querySelectorAll("td");

        for (let td of tds) {
          if (!td.classList.contains("remov"))
            td.addEventListener("click", function func() {
              let input = document.createElement("input");
              input.value = 'new value';
              td.innerHTML = "";
              td.appendChild(input);

              input.addEventListener("blur", function () {
                td.innerHTML = input.value;
                td.addEventListener("click", func);
              });

              td.removeEventListener("click", func);
            });
        }
      }
    </script>
  </body>
</html>
